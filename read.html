<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read Data</title>
</head>

<body>
    <form id="readForm">
        <input type="text" id="username" placeholder="Enter Name to Read" required><br>
        <input type="submit" value="Read Data">
    </form>
    <p id="output"></p>

    <script type="module">
        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
        import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-analytics.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBlfnZvS9N2XBjBMiKMnlCywc-FjBnkDhQ",
            authDomain: "plnat-growth.firebaseapp.com",
            databaseURL: "https://plnat-growth-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "plnat-growth",
            storageBucket: "plnat-growth.firebasestorage.app",
            messagingSenderId: "714741844786",
            appId: "1:714741844786:web:ce7246947c8d5a109f252b",
            measurementId: "G-PLPRSHRBH7"
        };


        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Add an event listener to the form
        document.getElementById("readForm").addEventListener("submit", function (e) {
            e.preventDefault();
            const username = document.getElementById("username").value;

            // Reference the data and get it
            const dbRef = ref(db);
            get(child(dbRef, `user/${username}`))
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        document.getElementById("output").innerText =
                            `Name: ${data.username} 
                            Email: ${data.email} 
                            Phone: ${data.phone}`;
                    } else {
                        document.getElementById("output").innerText = "No data found";
                    }
                })
                .catch((error) => console.error("Error reading data:", error));
        });
    </script>
</body>

</html>