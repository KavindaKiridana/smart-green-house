<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form id="userForm">
        <input type="text" id="username" placeholder="Name" required><br>
        <input type="email" id="email" placeholder="Email" required><br>
        <input type="tel" id="phone" placeholder="Phone" required><br>
        <input type="submit" value="Submit" id="submit">
    </form>
    <script type="module">
        // Import the functions you need from the SDKs 
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBlfnZvS9N2XBjBMiKMnlCywc-FjBnkDhQ",
            authDomain: "plnat-growth.firebaseapp.com",
            databaseURL: "https://plnat-growth-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "plnat-growth",
            storageBucket: "plnat-growth.firebasestorage.app",
            messagingSenderId: "714741844786",
            appId: "1:714741844786:web:ce7246947c8d5a109f252b",
            measurementId: "G-PLPRSHRBH7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Get a reference to the database service
        const db = getDatabase(app);

        // Get the form element
        const userForm = document.getElementById("userForm");

        // Add an event listener for the form submission
        userForm.addEventListener('submit', function (e) {
            e.preventDefault(); // Prevent form from reloading the page

            // Get the input values
            const username = document.getElementById("username").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;

            // Write data to Firebase Realtime Database
            set(ref(db, 'users/' + username), {
                username: username,
                email: email,
                phone: phone
            }).then(() => {
                // Alert after data is successfully written
                alert("Data saved successfully!");
                // Optional: Reset the form
                userForm.reset();
            }).catch((error) => {
                // Log errors to the console and alert the user
                console.error("Error writing data: ", error);
                alert("Error saving data: " + error.message);
            });
        });
    </script>
</body>

</html>